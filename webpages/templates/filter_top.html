{% extends "base.html" %}
{% block content %}

<h2>Hello! Welcome to the </h2>
<h1 class="myfancyfont">Marvel and DC Comic Books Knowledge Graph UI</h1>

<h2>This system was built as part of the <b>INF 558/CSCI 563: Building Knowledge Graphs</b> class @ <a href="https://www.cs.usc.edu/" target="_blank">University of Southern California</a></h2>

<h1 class="myfancyfont">Top Results of <span id="predicate1" style="color:purple">{{pred1}}</span></h1>

<form name="char_top" action="/filtertop" method="GET">
  <span>Choose a different property you'd like to see its top results:</span>
  <select name="char_chosen_attr" onchange="this.form.submit()">
      <option value="" SELECTED></option>"
    {% for drop_itm in dropdown1 %}
      <option value="{{drop_itm}}">{{drop_itm}}</option>"
    {% endfor %}
  </select>
</form>

<table class="table">
  <tr>
    <td>
      <!-- bar chart canvas element -->
      <canvas id="piechart01" width="300" height="300"></canvas>
      <script>
         var pieData = [
                  {% for item,label,colors in set %}
                      {
                          value: {{item}},
                          label: "{{label}}",
                          color : "{{colors}}"
                      },
                      {% endfor %}
               ];
       
         // get bar chart canvas
         var mychart = document.getElementById("piechart01").getContext("2d");
       
         steps = 10
         max = 10
         // draw pie chart
         new Chart(document.getElementById("piechart01").getContext("2d")).Pie(pieData);
      </script>
    </td>
    <td>
      <!-- bar chart canvas element -->
      <canvas id="barchart02" width="400" height="800"></canvas>
      <script>
         // bar chart data
         var barData = {
         labels : [{% for item in labels %}
                        "{{item}}",
                    {% endfor %}],
         datasets : [
            {
                  fillColor: "rgba(151,187,205,0.2)",
                  strokeColor: "rgba(151,187,205,1)",
                  pointColor: "rgba(151,187,205,1)",
               data : [{% for item in values %}
                            {{item}},
                          {% endfor %}]
            }
            ]
         }
       
         // get bar chart canvas
         var mychart = document.getElementById("barchart02").getContext("2d");
       
         // TODO: change to params, not hard-coded
         steps = 10
         max = {{max_val}}
         // draw bar chart
         new Chart(mychart).Bar(barData, {
              scaleOverride: true,
              scaleSteps: steps,
              scaleStepWidth: Math.ceil(max / steps),
              scaleStartValue: 0,
              scaleShowVerticalLines: true,
              scaleShowGridLines : true,
              barShowStroke : true,
              scaleShowLabels: true
         });
       
      </script>
    </td>
  </tr>
</table>

{% endblock %}